language: php
php:
- '7.0'
env:
  global:
  - COMMIT=${TRAVIS_COMMIT::8}
  - secure: rMzuba6LHFHwo1GG2oKy6tyCEyKJqqLWtxMxvYEgzgZs+CtNMZgLaKPcarOMkk+KPM6jH4rNnTxI7usXxmNlwty5U3+x18Dp/OuhMXMxO82fwkTxmAlUeNjFYLpq2Xj3+1yC1uKi5l2gexB8NToGJLmCWRVIOrQxgyXdivLoW7fMsIdxySvzYE7bnyYLNoRt0n+BQ91tO6IYL3dL0lVsOizuiOuOg0fcTALxHY9BD7dqKyrDIg3GDMiAHUr3y+UYqGDlym9nMj90V57nHLILH82fbJvKaqs6dOotZ7BXQ1VqSekpyBpejJav3AZhzW8fnX6gr2Z5/F70I5r6ZA0E+lx2YBhbQwChr/iSwyMNk6gn3sq3BUXZ4Xe++FPHpzbAlstizcYH+YKmrwAfECRUHRb1W5J2X+CyADddKj/M7ILvru8A9fmxl/XpRj1qvUce1KpYo32smHsW/h5i/Xc5YqgpGLGnKiDeBVVN6X3jGz4ITrU4a3UKaGkr+3NbHwJjHNBSS4oddWCe5Z/hO6XW67AbfNn/UUV8OeiKHkju4VOSO8cbGH3Jw+nmk1vqkO/Rqwm+tx9qzPL65M0MH53gRFBTrmiHDh7jqMginmHhf8vW4WKV/s6YLCAmwrIgoglxJl7kgvppblDC5SsDdAbmaxUtLHQ6cKCp1XpFznwg7BI=
  - secure: Xw+ELZRdFviaISGJieuRC6AqYNbR2svfywBPzciq9gV+oTwu+ydRFrIpOr7cQu5bnjf+7QMh1hihSGU92bx47VPjptZPQSCjO7z3evNcZq0zye+9Rs+DixvqWFlsg+UTK9I/IqXgPLP9bZYSpVL/OJC+2vQ3MMz7AY8yEpbHhQgR8P+KHe+MLI7V8AYoZeiuAX8PIIcyJt+BaBmbHJ93qm5XnGNBkOmNFkQjxV5EtDo8zFgvujBXDaCnkZ+BgXE1SYzQX+tsPTrOuGxJdXToLKhw4NVXXKvy2oIad91cmGSNYeui4sk4sEwp5SPhLVqgoVx4lO0D927RfA+Q4Oytuz9deGygMSxOOl7+NXSlHRfLhoyV5Px4dtrgY6dbVaCVvP/SaNqaoC5SJALX5jZA3CsH9I+xxfJ3CLEgkY6EEr7W8RaLnPGGN2UC4zICvJatF+L5eayW+UjiieVF4hYNcaubZXgI8kZg9i+GgkIkQTZWw7AKsDXs0Zhis/f0TEwkJZsbeO8kGXLpfyjH6itWCAoSkPIhyKgsUYYO4v4vpYHKdyA4DypRoFLnLQMER4ALVmcKFIR7BmCC8jLY2K/WqP7TIgn7dfJ/G5so3Lvra3Nbwbz4MSS5gzby2lCDqNr01zOdo5EP9ZJrvHB1D6yYYClg6TqY7QWfCvucFYNsOp0=
  - secure: T0pHKDD372hInbHpbTDxLz+j+aUxQjN8Q9wWDdEXmm0DZg0HMth/LIEmz1xSFAb2Z713PHSece8kTiaFTN+nifPEVBoo8CTfTpl7Gyexud9wkEjOIDQKGVpVI6ldWLnCbcnl81CzPPvndM+y7z010PjODjf6DyIuw0PzATo5dcnPeClcibOzGKCqximokRpkPHl9lmMtOEHV9hXsHftt8PNX8R1zufW0bPzNTKU+Z4I5ScnWi87btwcxF++HClD2N6egiD5cD6Ymzc6Jot/dAASdcxtMVuuXl7rmvruUUTBspGsINfdDOEiqLirA9/SfAAiSGEG4o7usdWQvUEV3rNidT9eien3cs2l/fo81ln3xg06LDRhnimqBZKhl8lzGkVNUTzxielMan7F285Yz5gf+r/jYfqlG/U99kvXLDxfUAwfDuyKUrpDdYtmdurzhHukZFoWwFUKrqOBlZZejXAtgGfenpQ1IJJGCKBNV03AAR1ISMyDOGwoIrc8bieoHlcP7dg/Bgy7w2kdOpx5QZhfg3Yd0KPIlYJZQv12EOhhHqq80DJlmUQ5sN58OZooQdaoEugTd92NXZ47fiGuyPGLFU84S7mX7WSj3nq9Ixc+TWf5OlEDxfKsGhms8ILereNb8j1UCLQrVrltt8ypn03M3ocnnizQtUD2d/wg1Mqs=
script:
- ls -alh
- docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS
- export REPO=netsyos/docker-base
- export TAG=`if [ "$TRAVIS_BRANCH" == "master" ]; then echo "latest"; else echo $TRAVIS_BRANCH ; fi`
- docker build -f Dockerfile -t $REPO:$COMMIT .
- docker tag $REPO:$COMMIT $REPO:$TAG
- docker tag $REPO:$COMMIT $REPO:travis-$TRAVIS_BUILD_NUMBER
- docker push $REPO
after_success:
- date
